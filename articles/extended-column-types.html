<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extended Column Types • interlacer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extended Column Types">
<script data-goatcounter="https://interlacer.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">interlacer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/interlacer.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/extended-column-types.html">Extended Column Types</a></li>
    <li><a class="dropdown-item" href="../articles/coded-data.html">Coded Data</a></li>
    <li><a class="dropdown-item" href="../articles/other-approaches.html">Other Approaches</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/khusmann/interlacer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extended Column Types</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/khusmann/interlacer/blob/v0.3.5/vignettes/extended-column-types.Rmd" class="external-link"><code>vignettes/extended-column-types.Rmd</code></a></small>
      <div class="d-none name"><code>extended-column-types.Rmd</code></div>
    </div>

    
    
<p>Like the <code>readr::read_*()</code> family of functions,
<code>read_interlaced_*()</code> will automatically guess column types
by default:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/khusmann/interlacer" class="external-link">interlacer</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"colors.csv"</span><span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"REFUSED"</span>, <span class="st">"OMITTED"</span>, <span class="st">"N/A"</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Registered S3 methods overwritten by 'readr':</span></span>
<span><span class="co">#&gt;   method                    from </span></span>
<span><span class="co">#&gt;   as.data.frame.spec_tbl_df vroom</span></span>
<span><span class="co">#&gt;   as_tibble.spec_tbl_df     vroom</span></span>
<span><span class="co">#&gt;   format.col_spec           vroom</span></span>
<span><span class="co">#&gt;   print.col_spec            vroom</span></span>
<span><span class="co">#&gt;   print.collector           vroom</span></span>
<span><span class="co">#&gt;   print.date_names          vroom</span></span>
<span><span class="co">#&gt;   print.locale              vroom</span></span>
<span><span class="co">#&gt;   str.col_spec              vroom</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    person_id       age favorite_color</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl,fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl,fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr,fct&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1        20 BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">&lt;REFUSED&gt;</span> BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3        21 <span style="color: #BB0000;">&lt;REFUSED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4        30 <span style="color: #BB0000;">&lt;OMITTED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5         1 <span style="color: #BB0000;">&lt;N/A&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6        41 RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7        50 <span style="color: #BB0000;">&lt;OMITTED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8        30 YELLOW        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">&lt;REFUSED&gt;</span> <span style="color: #BB0000;">&lt;REFUSED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">&lt;OMITTED&gt;</span> RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11        10 <span style="color: #BB0000;">&lt;REFUSED&gt;</span></span></span></code></pre></div>
<p>As with readr, these column type guess can be overridden using the
<code>col_types</code> parameter with a <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">readr::cols()</a></code>
column specification:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="op">(</span><span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"colors.csv"</span><span class="op">)</span>,</span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols</a></span><span class="op">(</span></span>
<span>    person_id <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html" class="external-link">col_number</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    favorite_color <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_factor.html" class="external-link">col_factor</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BLUE"</span>, <span class="st">"RED"</span>, <span class="st">"YELLOW"</span>, <span class="st">"GREEN"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"REFUSED"</span>, <span class="st">"OMITTED"</span>, <span class="st">"N/A"</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    person_id       age favorite_color</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;int,fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl,fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct,fct&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1        20 BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">&lt;REFUSED&gt;</span> BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3        21 <span style="color: #BB0000;">&lt;REFUSED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4        30 <span style="color: #BB0000;">&lt;OMITTED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5         1 <span style="color: #BB0000;">&lt;N/A&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6        41 RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7        50 <span style="color: #BB0000;">&lt;OMITTED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8        30 YELLOW        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">&lt;REFUSED&gt;</span> <span style="color: #BB0000;">&lt;REFUSED&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">&lt;OMITTED&gt;</span> RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11        10 <span style="color: #BB0000;">&lt;REFUSED&gt;</span></span></span></code></pre></div>
<div class="section level2">
<h2 id="x_cols-extended-cols-specifications">
<code>x_cols</code>: extended <code>cols</code> specifications<a class="anchor" aria-label="anchor" href="#x_cols-extended-cols-specifications"></a>
</h2>
<p>When you need more fine-grained control over value and missing reason
channel types, you can use an <code><a href="../reference/x_cols.html">x_cols()</a></code> specification, an
extension of readr’s <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">readr::cols()</a></code> system. With
<code><a href="../reference/x_cols.html">x_cols()</a></code>, you can control both the value channel and na
channel types in the columns of the resulting data frame.</p>
<p>This is useful when you have missing reasons that only apply to
particular items as opposed to the file as a whole. For example, say we
had a measure with the following two items:</p>
<ol style="list-style-type: decimal">
<li>What is your current stress level?</li>
</ol>
<blockquote>
<ol style="list-style-type: lower-alpha">
<li>Low</li>
<li>Moderate</li>
<li>High</li>
<li>I don’t know</li>
<li>I don’t understand the question</li>
</ol>
</blockquote>
<ol start="2" style="list-style-type: decimal">
<li>How well do you feel you manage your time and responsibilities
today?</li>
</ol>
<blockquote>
<ol style="list-style-type: lower-alpha">
<li>Poorly</li>
<li>Fairly well</li>
<li>Well</li>
<li>Very well</li>
<li>Does not apply (Today was a vacation day)</li>
<li>Does not apply (Other reason)</li>
</ol>
</blockquote>
<p>As you can see, both items have two selection choices that should be
mapped to missing reasons. These can be specified with the
<code><a href="../reference/x_cols.html">x_cols()</a></code> as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df_stress</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"stress.csv"</span><span class="op">)</span>,</span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="../reference/x_cols.html">x_cols</a></span><span class="op">(</span></span>
<span>    person_id <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/value_collectors.html">v_col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/na_collectors.html">na_col_none</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    current_stress <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/value_collectors.html">v_col_factor</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LOW"</span>, <span class="st">"MODERATE"</span>, <span class="st">"HIGH"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/na_collectors.html">na_col_factor</a></span><span class="op">(</span><span class="st">"DONT_KNOW"</span>, <span class="st">"DONT_UNDERSTAND"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    time_management <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="../reference/value_collectors.html">v_col_factor</a></span><span class="op">(</span>levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"POORLY"</span>, <span class="st">"FAIRLY_WELL"</span>, <span class="st">"WELL"</span>, <span class="st">"VERY_WELL"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="../reference/na_collectors.html">na_col_factor</a></span><span class="op">(</span><span class="st">"NA_VACATION"</span>, <span class="st">"NA_OTHER"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 3</span></span></span>
<span><span class="co">#&gt;   person_id current_stress    time_management</span></span>
<span><span class="co">#&gt;       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct,fct&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;fct,fct&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>         1 LOW               VERY_WELL      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>         2 MODERATE          POORLY         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>         3 <span style="color: #BB0000;">&lt;DONT_KNOW&gt;</span>       <span style="color: #BB0000;">&lt;NA_OTHER&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>         4 HIGH              POORLY         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>         5 <span style="color: #BB0000;">&lt;DONT_UNDERSTAND&gt;</span> <span style="color: #BB0000;">&lt;NA_OTHER&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>         6 LOW               <span style="color: #BB0000;">&lt;NA_VACATION&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span>         7 MODERATE          WELL           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span>         8 <span style="color: #BB0000;">&lt;DONT_KNOW&gt;</span>       FAIRLY_WELL</span></span></code></pre></div>
<p>Like readr’s <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">readr::cols()</a></code> function, each named
<code><a href="../reference/x_cols.html">x_cols()</a></code> describes a column in the resulting data frame.
Value and missing reason channel types are declared via calls to
<code>v_col_*()</code> and <code>na_col_*()</code> respectively, which
are assembled by <code><a href="../reference/x_col.html">x_col()</a></code>.</p>
<p><code>v_col_*()</code> types mirror readr’s <code>readr::col_*</code>
column “collectors”. So <code><a href="../reference/value_collectors.html">v_col_double()</a></code> is equivalent to
<code><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">readr::col_double()</a></code>, <code><a href="../reference/value_collectors.html">v_col_character()</a></code> is
equivalent to <code><a href="https://readr.tidyverse.org/reference/parse_atomic.html" class="external-link">readr::col_character()</a></code>, etc. See vroom’s
documentation for a <a href="https://vroom.r-lib.org/articles/vroom.html#column-types" class="external-link">list of
available column types</a>.</p>
<p><code>na_col_*()</code> collectors allow you to declare missing
reason channel type of the loaded column, and the values that should be
interpreted as missing reasons. Currently, there are five options:</p>
<ol style="list-style-type: decimal">
<li><p><code><a href="../reference/na_collectors.html">na_col_default()</a></code>: Use the collector defined by the
<code>na =</code> argument in the <code>read_interlaced_*()</code>
function</p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_none()</a></code>: Load the column without a missing
reason channel.</p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_factor()</a></code>: Use a factor missing reason
channel. Character arguments passed form the levels of the factor.
(e.g. <code>na_col_factor("REFUSED", "OMITTED", "N/A")</code>)</p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_integer()</a></code>: Use an integer na channel. Numeric
arguments passed are the values to be interpreted as missing values.
(e.g. <code>na_col_integer(-99, -98, -97))</code>)</p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_cfactor()</a></code>: Use a <code>cfactor</code> na
channel. (<code>cfactor</code> types will be covered in the next
vignette,<code><a href="../articles/coded-data.html">vignette("coded-data")</a></code>)</p></li>
</ol>
<p>The following example shows some of these collectors in action. In
this example we use a coded version of the <code>colors.csv</code>
example data, to demonstrate integer missing reason types:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"colors_coded.csv"</span><span class="op">)</span>,</span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="../reference/x_cols.html">x_cols</a></span><span class="op">(</span></span>
<span>    person_id <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span><span class="fu"><a href="../reference/value_collectors.html">v_col_integer</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/na_collectors.html">na_col_none</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span><span class="fu"><a href="../reference/value_collectors.html">v_col_double</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/na_collectors.html">na_col_integer</a></span><span class="op">(</span><span class="op">-</span><span class="fl">99</span>, <span class="op">-</span><span class="fl">98</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    favorite_color <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span><span class="fu"><a href="../reference/value_collectors.html">v_col_integer</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/na_collectors.html">na_col_integer</a></span><span class="op">(</span><span class="op">-</span><span class="fl">99</span>, <span class="op">-</span><span class="fl">98</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    person_id       age favorite_color</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl,int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int,int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1        20              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2     <span style="color: #BB0000;">&lt;-98&gt;</span>              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3        21          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4        30          <span style="color: #BB0000;">&lt;-97&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5         1          <span style="color: #BB0000;">&lt;-99&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6        41              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7        50          <span style="color: #BB0000;">&lt;-97&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8        30              3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9     <span style="color: #BB0000;">&lt;-98&gt;</span>          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10     <span style="color: #BB0000;">&lt;-97&gt;</span>              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11        10          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="shortcuts">Shortcuts<a class="anchor" aria-label="anchor" href="#shortcuts"></a>
</h2>
<div class="section level3">
<h3 id="default-collector-types">Default collector types<a class="anchor" aria-label="anchor" href="#default-collector-types"></a>
</h3>
<p>Like readr’s <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols()</a></code> function, the <code><a href="../reference/x_cols.html">x_cols()</a></code>
function accepts a <code>.default</code> argument that specifies a
default value collector. The <code>na =</code> argument is similarly
used to specify a default missing reason collector to be used when no
<code>na_col_*()</code> is specified, or when it is set to
<code><a href="../reference/na_collectors.html">na_col_default()</a></code>.</p>
<p>By taking advantage of these defaults, the specification in the last
example could have been equivalently written as:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"colors_coded.csv"</span><span class="op">)</span>,</span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="../reference/x_cols.html">x_cols</a></span><span class="op">(</span></span>
<span>    .default <span class="op">=</span> <span class="fu"><a href="../reference/value_collectors.html">v_col_integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    person_id <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span><span class="fu"><a href="../reference/value_collectors.html">v_col_integer</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="../reference/na_collectors.html">na_col_none</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="../reference/value_collectors.html">v_col_double</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="../reference/na_collectors.html">na_col_integer</a></span><span class="op">(</span><span class="op">-</span><span class="fl">99</span>, <span class="op">-</span><span class="fl">98</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    person_id       age favorite_color</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl,int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int,int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1        20              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2     <span style="color: #BB0000;">&lt;-98&gt;</span>              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3        21          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4        30          <span style="color: #BB0000;">&lt;-97&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5         1          <span style="color: #BB0000;">&lt;-99&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6        41              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7        50          <span style="color: #BB0000;">&lt;-97&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8        30              3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9     <span style="color: #BB0000;">&lt;-98&gt;</span>          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10     <span style="color: #BB0000;">&lt;-97&gt;</span>              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11        10          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="concise-value-and-missing-reason-specifications">Concise value and missing reason specifications<a class="anchor" aria-label="anchor" href="#concise-value-and-missing-reason-specifications"></a>
</h3>
<p>Like readr, value collectors can be specified using characters. For
example, instead of <code><a href="../reference/value_collectors.html">v_col_integer()</a></code>, you can use
<code>"i"</code>. See vroom’s documentation for a <a href="https://vroom.r-lib.org/articles/vroom.html#column-types" class="external-link">complete
list of these shortcuts</a>.</p>
<p>Similarly, missing reason collectors can be specified by providing a
vector of the missing values; the collector type is inferred via the
type of the vector. The conversions are as follows:</p>
<ul>
<li><p><code><a href="../reference/na_collectors.html">na_col_none()</a></code>: <code>NULL</code></p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_factor()</a></code>: A character vector,
e.g. <code>c("REFUSED", "OMITTED", "N/A")</code></p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_integer()</a></code>: A numeric vector,
e.g. <code>c(-99, -98, -97))</code></p></li>
<li><p><code><a href="../reference/na_collectors.html">na_col_cfactor()</a></code>: A named character or numeric
vector, e.g.
<code>c(REFUSED = -99, OMITTED = -98, `N/A` = -97)</code></p></li>
</ul>
<p>Using these shortcuts, the previous example could have equivalently
been written in more compact form as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"colors_coded.csv"</span><span class="op">)</span>,</span>
<span>  col_types <span class="op">=</span> <span class="fu"><a href="../reference/x_cols.html">x_cols</a></span><span class="op">(</span></span>
<span>    .default <span class="op">=</span> <span class="st">"i"</span>,</span>
<span>    person_id <span class="op">=</span> <span class="fu"><a href="../reference/x_col.html">x_col</a></span><span class="op">(</span><span class="st">"i"</span>, <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="st">"d"</span>,</span>
<span>  <span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">99</span>, <span class="op">-</span><span class="fl">98</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    person_id       age favorite_color</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl,int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int,int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1        20              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2     <span style="color: #BB0000;">&lt;-98&gt;</span>              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3        21          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4        30          <span style="color: #BB0000;">&lt;-97&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5         1          <span style="color: #BB0000;">&lt;-99&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6        41              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7        50          <span style="color: #BB0000;">&lt;-97&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8        30              3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9     <span style="color: #BB0000;">&lt;-98&gt;</span>          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10     <span style="color: #BB0000;">&lt;-97&gt;</span>              2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11        10          <span style="color: #BB0000;">&lt;-98&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>In this vignette we covered how the column types for values and
missing reasons can be explicitly specified using collectors. We also
illustrated how column-level missing values can be specified by creating
extended column type specifications using <code><a href="../reference/x_cols.html">x_cols()</a></code>.</p>
<p>In the final examples, we used an example data set with coded values
and missing reasons. Coded values are especially common in data sets
produced by SPSS, SAS, and Stata. interlacer provides a special column
type to make working with this sort of data easier: the
<code>cfactor</code> type. This will be covered in next vignette,
<code><a href="../articles/coded-data.html">vignette("coded-data")</a></code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kyle Husmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
