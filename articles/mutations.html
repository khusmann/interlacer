<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="interlacer">
<title>Mutating Values and Missing Reasons • interlacer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mutating Values and Missing Reasons">
<meta property="og:description" content="interlacer">
<meta property="og:image" content="http://kylehusmann.com/interlacer/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">interlacer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/interlacer.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/mutations.html">Mutating Values and Missing Reasons</a>
    <a class="dropdown-item" href="../articles/column-types.html">Interlaced Column Types</a>
    <a class="dropdown-item" href="../articles/recipes.html">Recipes</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Mutating Values and Missing Reasons</h1>
            
      
      
      <div class="d-none name"><code>mutations.Rmd</code></div>
    </div>

    
    
<p>When working with a “deinterlaced dataframe”, care must be taken to
ensure that variables have a missing reason whenever a value is
<code>NA</code>, and a value whenever a missing reason is
<code>NA</code>. When this rule is violated, it creates ambiguous
states. For example if a variable has a values AND a missing reason,
it’s not clear which one represents the “correct” state of the variable.
Similarly, if a variable is missing its value AND its missing reason,
it’s probably a sign we made a mistake somewhere.</p>
<p>This means whenever we <code>mutate()</code> the values of a
variable, the missing reasons must also be updated, and vice versa. To
illustrate this, let’s load some example data:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_interlaced_delim.html">read_interlaced_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/interlacer_example.html">interlacer_example</a></span><span class="op">(</span><span class="st">"colors.csv"</span><span class="op">)</span>,</span>
<span>  na <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"REFUSED"</span>, <span class="st">"OMITTED"</span>, <span class="st">"N/A"</span><span class="op">)</span>,</span>
<span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id.   age .age.   favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>             20 <span style="color: #BB0000;">NA</span>      BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>             21 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>              1 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>             41 <span style="color: #BB0000;">NA</span>      RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>             50 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> OMITTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>             10 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED</span></span></code></pre></div>
<p>Say we wanted to redact the values in the <code>age</code> variable,
by setting their missing reason to <code>REDACTED</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    .age. <span class="op">=</span> <span class="st">"REDACTED"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id.   age .age.    favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>             20 REDACTED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>             21 REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>             30 REDACTED <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>              1 REDACTED <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>             41 REDACTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>             50 REDACTED <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>             30 REDACTED YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>             10 REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Warning: Column `age` has rows with both values and missing reasons</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Run `coalesce_channels()` to fix.</span></span></code></pre></div>
<p>As you can see by the warning message, we’ve created an ambigous
situation: there are now rows where <code>age</code> and
<code>.age.</code> both have values! We need to get rid of all the
<code>age</code> values:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    .age. <span class="op">=</span> <span class="st">"REDACTED"</span>,</span>
<span>    age <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id. age   .age.    favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>    REDACTED <span style="color: #BB0000;">NA</span>             REFUSED</span></span></code></pre></div>
<p>Let’s look at another example. Say our study was supposed to only let
participants choose between <code>RED</code> and <code>YELLOW</code> for
their favorite colors – but for some reason <code>BLUE</code> was
included as an option because of a technical glitch. In this situation,
we’d want to set all responses that weren’t <code>RED</code> and
<code>YELLOW</code> to be considered missing:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    favorite_color <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span></span>
<span>      <span class="va">favorite_color</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RED"</span>, <span class="st">"YELLOW"</span><span class="op">)</span>,</span>
<span>      <span class="va">favorite_color</span>,</span>
<span>      <span class="cn">NA</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id.   age .age.   favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>             20 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>             21 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>              1 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>             41 <span style="color: #BB0000;">NA</span>      RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>             50 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> OMITTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>             10 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Warning: Column `favorite_color` has rows without values or missing reasons</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Run `coalesce_channels()` to fix.</span></span></code></pre></div>
<p>As you can see by the warning, we’ve created another invalid state,
with some <code>favorite_color</code> responses having neither values
nor missing reasons. To fix this, we need to make a corresponding
mutation to the missing reason column:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    favorite_color <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span></span>
<span>      <span class="va">favorite_color</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RED"</span>, <span class="st">"YELLOW"</span><span class="op">)</span>,</span>
<span>      <span class="va">favorite_color</span>,</span>
<span>      <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .favorite_color. <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">favorite_color</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">.favorite_color.</span><span class="op">)</span>,</span>
<span>      <span class="st">"TECHNICAL_ERROR"</span>,</span>
<span>      <span class="va">.favorite_color.</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id.   age .age.   favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>             20 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             TECHNICAL_ERROR </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             TECHNICAL_ERROR </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>             21 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>              1 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>             41 <span style="color: #BB0000;">NA</span>      RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>             50 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> OMITTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>             10 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED</span></span></code></pre></div>
<p>To understand what’s going on here, let’s look at the mutation step
by step: First, where <code>favorite_color</code> is not
<code>RED</code> or <code>YELLOW</code>, we set as a missing value. In
doing this, we’ve created a bunch of rows where both the value and
missing reason are absent. In next part of the mutation, we fill in the
<code>TECHNICAL_ERROR</code> missing reason for these rows into
<code>.favorite_color.</code>, resulting in a well-formed deinterlaced
dataframe.</p>
<div class="section level2">
<h2 id="an-easier-way-with-coalesce_channels">An easier way with <code>coalesce_channels()</code><a class="anchor" aria-label="anchor" href="#an-easier-way-with-coalesce_channels"></a>
</h2>
<p>As you can imagine, manually fixing the value &amp; missing reason
structure of your dataframe for every mutation you do can get
cumbersome! Luckily, interlacer provides an easier way via
<code><a href="../reference/coalesce_channels.html">coalesce_channels()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    .age. <span class="op">=</span> <span class="st">"REDACTED"</span>,</span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/coalesce_channels.html">coalesce_channels</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="st">"missing"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id.   age .age.    favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED BLUE           <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REDACTED <span style="color: #BB0000;">NA</span>             REFUSED</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    favorite_color <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span></span>
<span>      <span class="va">favorite_color</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RED"</span>, <span class="st">"YELLOW"</span><span class="op">)</span>,</span>
<span>      <span class="va">favorite_color</span>,</span>
<span>      <span class="cn">NA</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/coalesce_channels.html">coalesce_channels</a></span><span class="op">(</span>default_reason <span class="op">=</span> <span class="st">"TECHNICAL_ERROR"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 6</span></span></span>
<span><span class="co">#&gt;    person_id .person_id.   age .age.   favorite_color .favorite_color.</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>             20 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             TECHNICAL_ERROR </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             TECHNICAL_ERROR </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>             21 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>              1 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             N/A             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>             41 <span style="color: #BB0000;">NA</span>      RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>             50 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             OMITTED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>             30 <span style="color: #BB0000;">NA</span>      YELLOW         <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> REFUSED <span style="color: #BB0000;">NA</span>             REFUSED         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span> OMITTED RED            <span style="color: #BB0000;">NA</span>              </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>             10 <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>             REFUSED</span></span></code></pre></div>
<p><code><a href="../reference/coalesce_channels.html">coalesce_channels()</a></code> should be run every time you mutate
something in a deinterlaced dataframe. It accepts two arguments
<code>keep</code>, and <code>default_reason</code>. With these paramters
set, it fixes both possible problem cases as follows:</p>
<p>Case 1: BOTH a value and a missing reason exists</p>
<ul>
<li>Keep the value when <code>keep = 'value'</code>
</li>
<li>Keep the missing reason when <code>keep = 'missing'</code>
</li>
</ul>
<p>Case 2: NEITHER a value nor a missing reason exists</p>
<ul>
<li>Fill in the missing reason with <code>default_reason</code>
</li>
</ul>
<p>These rules allow us to mutate our deinterlaced variables without
needing to specify BOTH the values and missing reason actions – we only
need to think about our operation one channel, and then a call to
<code><a href="../reference/coalesce_channels.html">coalesce_channels()</a></code> takes care of the other.</p>
</div>
<div class="section level2">
<h2 id="creating-new-columns">Creating New Columns<a class="anchor" aria-label="anchor" href="#creating-new-columns"></a>
</h2>
<p><code><a href="../reference/coalesce_channels.html">coalesce_channels()</a></code> will also automatically create
missing reason columns if they don’t automatically exist. This is useful
for adding new variables to your dataframe:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    person_type <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">18</span>, <span class="st">"CHILD"</span>, <span class="st">"ADULT"</span><span class="op">)</span>,</span>
<span>    .after <span class="op">=</span> <span class="va">person_id</span></span>
<span>  <span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu"><a href="../reference/coalesce_channels.html">coalesce_channels</a></span><span class="op">(</span>default_reason <span class="op">=</span> <span class="st">"AGE_UNAVAILABLE"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 11 × 8</span></span></span>
<span><span class="co">#&gt;    person_id .person_id. person_type .person_type.     age .age.  favorite_color</span></span>
<span><span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 <span style="color: #BB0000;">NA</span>          ADULT       <span style="color: #BB0000;">NA</span>                 20 <span style="color: #BB0000;">NA</span>     BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>          AGE_UNAVAILABLE    <span style="color: #BB0000;">NA</span> REFUS… BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 <span style="color: #BB0000;">NA</span>          ADULT       <span style="color: #BB0000;">NA</span>                 21 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 <span style="color: #BB0000;">NA</span>          ADULT       <span style="color: #BB0000;">NA</span>                 30 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 <span style="color: #BB0000;">NA</span>          CHILD       <span style="color: #BB0000;">NA</span>                  1 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 <span style="color: #BB0000;">NA</span>          ADULT       <span style="color: #BB0000;">NA</span>                 41 <span style="color: #BB0000;">NA</span>     RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 <span style="color: #BB0000;">NA</span>          ADULT       <span style="color: #BB0000;">NA</span>                 50 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 <span style="color: #BB0000;">NA</span>          ADULT       <span style="color: #BB0000;">NA</span>                 30 <span style="color: #BB0000;">NA</span>     YELLOW        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>          AGE_UNAVAILABLE    <span style="color: #BB0000;">NA</span> REFUS… <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>          AGE_UNAVAILABLE    <span style="color: #BB0000;">NA</span> OMITT… RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>        11 <span style="color: #BB0000;">NA</span>          CHILD       <span style="color: #BB0000;">NA</span>                 10 <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: .favorite_color. &lt;fct&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="writing-interlaced-files">Writing interlaced files<a class="anchor" aria-label="anchor" href="#writing-interlaced-files"></a>
</h2>
<p>After you’ve made made changes to your data, you probably want to
save them. Interlacer provides the <code>write_interlaced_*</code>
family of functions for this:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/write_interlaced_delim.html">write_interlaced_csv</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"interlaced_output.csv"</span><span class="op">)</span></span></code></pre></div>
<p>This will combine the value and missing reasons into interlaced
character columns, and write the result as a csv. Alternatively, if you
want to re-interlace the columns without writing to a file for more
control in the writing process, you can use
<code><a href="../reference/interlace_channels.html">interlace_channels()</a></code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/interlace_channels.html">interlace_channels</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    person_id age     favorite_color</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1         20      BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2         REFUSED BLUE          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3         21      REFUSED       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4         30      OMITTED       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5         1       N/A           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6         41      RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7         50      OMITTED       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8         30      YELLOW        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9         REFUSED REFUSED       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10        OMITTED RED           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> 11        10      REFUSED</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="final-note-setting-the-global-default-reason">Final note: Setting the global default reason<a class="anchor" aria-label="anchor" href="#final-note-setting-the-global-default-reason"></a>
</h2>
<p>By default, <code><a href="../reference/coalesce_channels.html">coalesce_channels()</a></code> will use
<code>UNKNOWN_REASON</code> as the default missing reason. Sometimes you
want to use a different default value, to act as the “catch-all” missing
reason, so you don’t have to constantly specify it. To do this, set the
global <code>default_missing_reason</code> option:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>default_missing_reason <span class="op">=</span> <span class="op">-</span><span class="fl">99</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tibble</span><span class="op">(</span></span>
<span>  a <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>, <span class="cn">NA</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/coalesce_channels.html">coalesce_channels</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># An deinterlaced tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;       a .a.  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>     1 <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>     2 <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>     3 <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>    <span style="color: #BB0000;">NA</span> -99  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>     5 <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Kyle Husmann.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
